<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>TfL bike sharing</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <!-- Slick Carousel -->
  <link rel="stylesheet" href="https://mywebsiteportio.netlify.app/plugins/slick/slick.css" />
  <link rel="stylesheet" href="https://mywebsiteportio.netlify.app/plugins/slick/slick-theme.css" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://mywebsiteportio.netlify.app/plugins/font-awesome/css/font-awesome.min.css" />

  <!-- Magnific Popup -->
  <link rel="stylesheet" href="https://mywebsiteportio.netlify.app/plugins/magnafic-popup/magnific-popup.css" />

  <!-- Stylesheets -->
  
  <link href="https://mywebsiteportio.netlify.app/scss/style.min.css" rel="stylesheet" />

  <!--Favicon-->
  <link rel="shortcut icon" href="https://mywebsiteportio.netlify.app/images/favicon.ico" type="image/x-icon" />
  <link rel="icon" href="https://mywebsiteportio.netlify.app/images/favicon.png" type="image/x-icon" />
  
</head>

<body>
  <nav class="navbar navbar-expand-lg fixed-top">
  <div class="container">
    <a href="https://mywebsiteportio.netlify.app/" class="navbar-brand">
      <img src="https://mywebsiteportio.netlify.app/images/contact/lbs_logo_025x025.png" alt="site-logo">
    </a>
    <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#navbarCollapse">
      <span class="navbar-toggler-icon"></span>
      <span class="navbar-toggler-icon"></span>
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
      <ul class="nav navbar-nav main-navigation my-0 mx-auto">
        
        
        <li class="nav-item">
          <a href="https://mywebsiteportio.netlify.app/#home"
            class="nav-link text-dark text-sm-center p-2 ">Home</a>
        </li>
        
        <li class="nav-item">
          <a href="https://mywebsiteportio.netlify.app/blog"
            class="nav-link text-dark text-sm-center p-2 ">All Projects</a>
        </li>
        
        <li class="nav-item">
          <a href="https://mywebsiteportio.netlify.app/contact"
            class="nav-link text-dark text-sm-center p-2 ">Contact</a>
        </li>
        
      </ul>
      <div class="navbar-nav">
        <a type="button" class="btn btn-lg btn-primary btn-zoom"
            href="files/CV_Francois_Mizrahi.pdf">Download CV</a>
      </div>
    </div>
  </div>
</nav>
  <div id="content">
    

<header class="breadCrumb">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 col-md-12 offset-lg-1 offset-md-0 text-center">
        <h3 class="breadCrumb__title">TfL bike sharing</h3>
        <nav aria-label="breadcrumb" class="d-flex justify-content-center">
          <ol class="breadcrumb align-items-center">
            <li class="breadcrumb-item"><a href=https://mywebsiteportio.netlify.app/>Home</a></li>
            <li class="breadcrumb-item"><a href=https://mywebsiteportio.netlify.app/blog>All Post</a></li>
            <li class="breadcrumb-item active" aria-current="page">TfL bike sharing</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</header>

<section class="section singleBlog">
  <div class="svg-img">
      <img src=https://mywebsiteportio.netlify.app/images/hero/figure-svg.svg alt="">
  </div>
  <div class="animate-shape">
      
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 600 600">
          <defs>
              <linearGradient id="d" x1="0.929" y1="0.111" x2="0.263" y2="0.935" gradientUnits="objectBoundingBox">
                  <stop offset="0" stop-color="#f1f6f9" />
                  <stop offset="1" stop-color="#f1f6f9" stop-opacity="0" />
              </linearGradient>
          </defs>
          <g data-name="blob-shape (3)">
              <path class="blob" fill="url(#d)"
                  d="M455.4 151.1c43.1 36.7 73.4 92.8 60.8 136.3-12.7 43.5-68.1 74.4-111.3 119.4-43.1 45-74 104.1-109.8 109-35.9 5-76.7-44.2-111.8-89.2-35.2-45-64.7-85.8-70.8-132.6-6-46.8 11.6-99.6 46.7-136.3 35.2-36.6 88-57.2 142.4-58.8 54.5-1.7 110.6 15.6 153.8 52.2z" />
          </g>
      </svg>
  </div>
  <div class="animate-pattern">
      <img src=https://mywebsiteportio.netlify.app/images/service/background-pattern.svg alt="background-shape">
  </div>
  <div class="container">
      <div class="row">
          <div class="col-lg-12">
              <div class="singleBlog__feature">
                  <img src=https://mywebsiteportio.netlify.app/images/single-blog/bike_tfl.jpg alt="feature-image">
              </div>
          </div>
      </div>
      <div class="row mt-5">
          <div class="col-lg-12">
              <div class="singleBlog__content">
                  
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="excess-rentals-in-tfl-bike-sharing" class="section level1">
<h1>Excess rentals in TfL bike sharing</h1>
<p>In this project we will focus on the TfL Dataset. The goal is to better visualize the changes on the number of Bike hired.</p>
<blockquote>
<p>First lets look at the monthly changes compared to the 2016-2019 monthly average.</p>
</blockquote>
<pre class="r"><code> general_monthly_average &lt;- bike %&gt;% 
  filter(year&gt;=2016 &amp; year&lt;=2019) %&gt;% 
  group_by(month) %&gt;%
  summarise(general_monthly_average = mean(bikes_hired))

monthly_average &lt;- bike %&gt;% 
  filter(year&gt;=2016) %&gt;%
  group_by(year, month) %&gt;%
  summarise(monthly_average = mean(bikes_hired),
            year = unique(year))

full_monthly_averages &lt;- left_join(monthly_average, general_monthly_average, by=&quot;month&quot;)

full_monthly_averages %&gt;% 
  ggplot(aes(x=month, group=1)) +
  geom_line(aes(y=monthly_average)) +
  geom_line(aes(y=general_monthly_average),
            color = &quot;blue&quot;,
            size=0.8) +
  geom_ribbon(aes(ymin = ifelse(general_monthly_average &gt; monthly_average, general_monthly_average, monthly_average), 
                  ymax = general_monthly_average), 
              fill = &quot;palegreen3&quot;, 
              alpha = 0.5)+
  geom_ribbon(aes(ymin = ifelse(general_monthly_average &lt;= monthly_average, general_monthly_average, monthly_average), 
                  ymax = general_monthly_average), 
              fill = &quot;lightcoral&quot;, alpha = 0.5) +
  facet_wrap(~year) +
  labs(title = &quot;Monthly changes if Tfl bike rentals&quot;,
       subtitle=&quot;Change from monthly average shown in blue \nand calculated between 2026-2019&quot;,
       y = &quot;Bike rentals&quot;,
       x = &quot;Months&quot;
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(size = 6),
    axis.text.y = element_text(size = 6)
    ) +
  NULL</code></pre>
<p><img src="/blog/TfL_bike/TfL_bike_files/figure-html/unnamed-chunk-1-1.png" width="648" style="display: block; margin: auto;" /></p>
<blockquote>
<p>We can now visualize how big the monthly changes can be compared to the average.</p>
</blockquote>
<pre class="r"><code>expected_bike_pw &lt;- bike %&gt;%
  filter(day &gt;= as.Date(&quot;2016-1-1&quot;) &amp; day &lt;= as.Date(&quot;2019-12-31&quot;)) %&gt;%
  group_by(week) %&gt;% 
  summarise(expected_rentals = mean(bikes_hired))

bike_pw &lt;- bike %&gt;%
  filter(year &gt;= 2016 &amp; !(year == 2021 &amp; week &gt; 30)) %&gt;%
  group_by(year, week) %&gt;% 
  summarise(actual_rentals = mean(bikes_hired)) %&gt;% 
  left_join(expected_bike_pw, by=&quot;week&quot;) %&gt;% 
  mutate(excess_rentals = actual_rentals - expected_rentals,
         excess_rentals_inpct = excess_rentals/expected_rentals)</code></pre>
<pre class="r"><code>weekly_plot &lt;- bike_pw %&gt;% 
  ggplot(aes(x = week)) +
  geom_line(aes(y = excess_rentals_inpct), 
            color = &quot;black&quot;, 
            size = 0.1) +
  geom_ribbon(aes(ymin = ifelse(excess_rentals_inpct &gt; 0, 0, excess_rentals_inpct), 
                  ymax = excess_rentals_inpct),
              fill = &quot;green4&quot;, alpha = 0.3) +
  geom_ribbon(aes(ymin = ifelse(excess_rentals_inpct &gt; 0, excess_rentals_inpct, 0), 
                  ymax = excess_rentals_inpct),
              fill = &quot;red&quot;, alpha = 0.3) +
  geom_rug(color = ifelse(bike_pw$excess_rentals_inpct &gt; 0 , &quot;green&quot;, &quot;red&quot;),
           alpha = 0.5,
           size = 0.3) +
  annotate(&quot;rect&quot;,xmin = 13, xmax = 26, ymin = -Inf, ymax = Inf, fill = &quot;grey&quot;, alpha = 0.3) +
  annotate(&quot;rect&quot;,xmin = 39, xmax = 53, ymin = -Inf, ymax = Inf, fill = &quot;grey&quot;, alpha = 0.3) +
  scale_y_continuous(labels = scales::percent) +
  scale_x_continuous(breaks = seq(13,53,by=13)) +
  facet_wrap(~year) +
  theme_minimal() +
  theme(plot.title = element_text(size=7, face=&quot;bold&quot;),
        plot.subtitle = element_text(size=6, face=&quot;bold&quot;),
        axis.text.y = element_text(size=5),
        axis.text.x = element_text(size=5),
        axis.title.x = element_text(size=5, face=&quot;bold&quot;),
        strip.text = element_text(size=5),
        plot.caption = element_text(size=5),
        panel.grid.major = element_line(size=0.1),
        panel.grid.minor = element_line(size=0.1)) +
  labs(title = &quot;Monthly changes in TfL bike rentals&quot;, 
       subtitle = &quot;% change from weekly averages \n calculated between 2016-2019&quot;,
       y = &quot;&quot;, 
       x = &quot;week&quot;,
       caption = &quot;Source: TfL, London Data Store&quot;) 
weekly_plot</code></pre>
<p><img src="/blog/TfL_bike/TfL_bike_files/figure-html/unnamed-chunk-3-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>For both of these graphs, we to calculates the expected number of rentals per week or month between 2016-2019 and then, we see how each week/month of 2020-2021 compares to the expected rentals.</p>
<p>We can see massive spikes in the previous graph, so it might be more useful to use the median rather than the mean, as extreme values won’t affect it as much.</p>
</div>

              </div>
          </div>
      </div>
  </div>
</section>


  </div>
  <section class="footer" id="contact">
	<div class="footer__background_shape">
		<svg viewBox="0 0 1920 79">
			<path d="M0 0h1920v79L0 0z" data-name="Path 1450" />
		</svg>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<div class="footer__cta">
					<div class="shape-1">
						<svg xmlns="http://www.w3.org/2000/svg" width="357" height="315.029" viewBox="0 0 357 315.029">
							<path data-name="Path 1449"
								d="M76.1-157.222C91.746-135.8 87.2-94.273 99.993-61.945c12.7 32.328 42.661 55.459 39.248 73.282-3.318 17.823-40.007 30.337-65.6 43.325-25.5 12.988-39.912 26.545-60.01 42.566-20.1 16.116-46.074 34.6-63.328 27.682-17.349-6.921-25.976-39.153-59.915-59.82s-93.1-29.768-105.325-51.478 22.373-56.028 43.609-93.949c21.331-37.921 29.2-79.35 53.563-96.793 24.459-17.444 65.414-10.9 103.9-6.921 38.396 3.982 74.326 5.404 89.965 26.829z"
								transform="translate(217.489 188.626)" />
						</svg>
					</div>
					<div class="shape-2">
						<svg xmlns="http://www.w3.org/2000/svg" width="357" height="315.029" viewBox="0 0 357 315.029">
							<path data-name="Path 1449"
								d="M76.1-157.222C91.746-135.8 87.2-94.273 99.993-61.945c12.7 32.328 42.661 55.459 39.248 73.282-3.318 17.823-40.007 30.337-65.6 43.325-25.5 12.988-39.912 26.545-60.01 42.566-20.1 16.116-46.074 34.6-63.328 27.682-17.349-6.921-25.976-39.153-59.915-59.82s-93.1-29.768-105.325-51.478 22.373-56.028 43.609-93.949c21.331-37.921 29.2-79.35 53.563-96.793 24.459-17.444 65.414-10.9 103.9-6.921 38.396 3.982 74.326 5.404 89.965 26.829z"
								transform="translate(217.489 188.626)" />
						</svg>
					</div>
					<div class="text-light footer__cta_content">
						<span>Work with me</span>
						<h2 class="mb-0">Let’s Start a Project</h2>
					</div>
					<div class="footer__cta_action">
						<a class="btn btn-light btn-zoom" href="https://mywebsiteportio.netlify.app/contact">Get in
							touch</a>
					</div>
				</div>
			</div>
		</div>
		<div class="row footer__widget">
			<div class="col-lg-4">
				<div class="footer__widget_logo mb-5">
					<img src="https://mywebsiteportio.netlify.app/images/contact/lbs_logo_05x05.png" alt="widget-logo">
				</div>
			</div>
			<div class="col-lg-4">
				<div class="text-light footer__widget_sitemap mb-5">
					<h4 class="base-font">Sitemap</h4>
					<ul class="unstyle-list small">
						
						
						<li class="mb-2"><a class="text-light" href="https://mywebsiteportio.netlify.app/">Home</a></li>
						
						<li class="mb-2"><a class="text-light" href="https://mywebsiteportio.netlify.app/blog">All Projects</a></li>
						
						<li class="mb-2"><a class="text-light" href="https://mywebsiteportio.netlify.app/contact">Contact</a></li>
						
					</ul>
				</div>
			</div>
			<div class="col-lg-4">
				<div class="text-light footer__widget_address mb-5">
					<h4 class="base-font">Address</h4>
					
					<ul class="fa-ul small">
						<li class="mb-2"><a class="text-light" href="tel:&#43;33%206%2098%2073%2040%2039"><span class="fa-li"><i
										class="fa fa-phone"></i></span>&#43;33 6 98 73 40 39</a></li>
						<li class="mb-2"><a class="text-light" href="mailto:fmizrahi.mam2022@london.edu"><span class="fa-li"><i
										class="fa fa-envelope"></i></span>fmizrahi.mam2022@london.edu</a></li>
						<li class="mb-2">
							<span class="fa-li"><i class="fa fa-map-marker"></i></span>Regent&#39;s Park, London, UK</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="row footer__footer">
			<div class="col-lg-6">
				<div class="footer__footer_copy text-light">
					<p></p>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="footer__footer_social">
					<ul class="unstyle-list">
						
						
						<li class="d-inline-block mx-2"><a class="text-light" target="_blank" href="https://www.linkedin.com/in/francois-mizrahi/"><i
									class="fa fa-linkedin-square"></i></a>
						</li>
						
					</ul>
				</div>
			</div>
		</div>
	</div>
</section>
<script src="https://maps.googleapis.com/maps/api/js?key=&libraries=geometry"></script>
<script src="https://mywebsiteportio.netlify.app/plugins/jQuery/jquery.min.js"></script>
<script src="https://mywebsiteportio.netlify.app/plugins/bootstrap/bootstrap.min.js"></script>
<script src="https://mywebsiteportio.netlify.app/plugins/slick/slick.min.js"></script>
<script src="https://mywebsiteportio.netlify.app/plugins/waypoint/jquery.waypoints.min.js"></script>
<script src="https://mywebsiteportio.netlify.app/plugins/magnafic-popup/jquery.magnific-popup.min.js"></script>
<script src="https://mywebsiteportio.netlify.app/plugins/tweenmax/TweenMax.min.js"></script>
<script src="https://mywebsiteportio.netlify.app/plugins/imagesloaded/imagesloaded.min.js"></script>
<script src="https://mywebsiteportio.netlify.app/plugins/masonry/masonry.min.js"></script>

<script src="https://mywebsiteportio.netlify.app/js/form-handler.min.js"></script>

<script src="https://mywebsiteportio.netlify.app/js/script.min.js"></script>

</body>

</html>